<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">

<div layout:fragment="content">
    <h2 th:text="${board.title}"></h2>
    <p th:text="${board.content}"></p>
    <div id="result">
    </div>
</div>

<th:block layout:fragment="script">
    <script>
        function post() {
            let form = document.getElementById('boardForm');
            let formData = new FormData(form);

            let jsonFormData = {};
            formData.forEach((value, key) => {
                jsonFormData[key] = value;
            });

            axios.post('/board/post', jsonFormData)
                .then(response => {
                    console.log(response);
                    console.log(response.data);
                    document.getElementById('result').append(response.data.data)
                })
                .catch(error => {
                    console.log(error);
                    document.getElementById('result').append(error.message);
                });
        }
    </script>
</th:block>
</html>
